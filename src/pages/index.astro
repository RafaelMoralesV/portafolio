---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug"

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const last_posts = posts.slice(0, 3);
---

<BaseLayout sideBarActiveItemID="home">
  <div class="pb-12 mt-5">
    <div class="text-xl py-1 text-secondary">Hola que tal 游녦</div>
    <div class="text-5xl font-bold text-primary">Soy Rafael Morales</div>
    <div class="text-3xl py-3 font-bold text-secondary">Ingeniero Civil en Computaci칩n menci칩n Inform치tica</div>
    <div class="py-2">
      <text class="text-lg">
        Soy un FullStack Developer con 2 a침os de experiencia en la industria. Me apasiona aprender nuevos lenguajes y 치reas de desarrollo distintas,
        por lo que mis proyectos incluyen desarrollos de alto y bajo nivel. Tuve el privilegio de trabajar en proyectos muy interesantes 
        durante mi trayecto por el Club ExDev de la Universidad Tecnol칩gica Metropolitana. Espero encuentres tan interesantes como yo los diversos
        proyectos que he hecho en mi corta carrera como ingeniero.
      </text>
    </div>
    <div class="mt-8">
      <a class="btn" href="https://linkedin.com/in/rafaelmoralesvenegas" target="_blank"> 춰Hablemos!</a>
      <a href="https://github.com/RafaelMoralesV" target="_blank" class="btn btn-outline ml-5">
        Revisa mis proyectos.
      </a>
    </div>
  </div>

  <div>
    <div class="text-3xl w-full font-bold mb-2">Mis 칰ltimos Proyectos {"</>"}</div>
  </div>

  <HorizontalCard
    title="Demo Project 1"
    img="/post_img.webp"
    desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    url="#"
    badge="NEW"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="Demo Project 2"
    img="/post_img.webp"
    desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    url="#"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="Demo Project 3"
    img="/post_img.webp"
    desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    url="#"
    badge="FOSS"
  />

  <div>
    <div class="text-3xl w-full font-bold mb-5 mt-10">Latest from blog</div>
  </div>

  {
    last_posts.map((post) => (
      <>
        <HorizontalCard
          title={post.data.title}
          img={post.data.heroImage}
          desc={post.data.description}
          url={"/blog/" + createSlug(post.data.title, post.slug)}
          target="_self"
          badge={post.data.badge}
        />
        <div class="divider my-0" />
      </>
    ))
  }
</BaseLayout>
